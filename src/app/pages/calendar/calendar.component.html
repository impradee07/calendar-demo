<div class="wholeContainer flex flex-col">
  <div class="flex flex-start mt-3">
    <div class="item1 mt-1">
      <span class="px-3 text-lg ml-1 font-bold">Calendar</span>
      <i
        class="fas fa-chevron-left cursor-pointer"
        id="left"
        (click)="decreaseMonth()"
      ></i>
      <span class="text-lg px-3 font-semibold">
        {{ displayYear }}
      </span>
      <i
        class="fas fa-chevron-right cursor-pointer"
        id="right"
        (click)="increaseMonth()"
      ></i>
    </div>
    <div class="item2">
      <div class="relative">
        <button
          class="
            w-36
            p-2
            rounded-md
            border border-gray-300
            shadow-sm
            bg-white
            text-sm
            font-medium
            text-gray-700
            focus:outline-none
          "
          aria-expanded="true"
          aria-haspopup="true"
          (click)="onDropdown()"
        >
          {{ displayMonth }}
          <span class="absolute px-1">
            <svg
              class="h-5 w-5"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              aria-hidden="true"
            >
              <path
                fill-rule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </span>
        </button>
        <button
          class="
            w-24
            ml-4
            p-2
            rounded-md
            shadow-sm
            bg-white
            text-sm
            font-medium
            text-gray-700
            focus:outline-none
          "
          (click)="setToday()"
        >
          Today
        </button>
      </div>
    </div>

    <div class="w-24 item4">
      <div>
        <button
          type="button"
          class="
            inline-flex
            justify-center
            w-full
            rounded-md
            border border-gray-300
            shadow-sm
            px-4
            py-2
            bg-white
            text-sm
            font-medium
            text-gray-700
            hover:bg-gray-50
            focus:outline-none
            focus:ring-2
            focus:ring-offset-2
            focus:ring-offset-gray-100
            focus:ring-indigo-500
          "
          id="options-menu"
          aria-expanded="true"
          aria-haspopup="true"
          (click)="onViewDropdown()"
        >
          Month

          <svg
            class="-mr-1 ml-2 h-5 w-5"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
          >
            <path
              fill-rule="evenodd"
              d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
      </div>
      <div
        class="
          origin-top-right
          absolute
          right-0
          mt-2
          w-56
          rounded-md
          shadow-lg
          bg-white
          ring-1 ring-black ring-opacity-5
          focus:outline-none
        "
        role="menu"
        *ngIf="isViewDropdown"
        aria-orientation="vertical"
        aria-labelledby="options-menu"
      >
        <div class="py-1" role="none">
          <a
            class="
              block
              px-4
              py-2
              text-sm text-gray-700
              hover:bg-gray-100
              hover:text-gray-900
            "
            role="menuitem"
            [ngClass]="{ 'opacity-75 cursor-not-allowed': true }"
            >Week</a
          >
          <a
            class="
              block
              px-4
              py-2
              text-sm text-gray-700
              hover:bg-gray-100
              hover:text-gray-900
            "
            role="menuitem"
            [ngClass]="{ 'opacity-75 cursor-not-allowed': true }"
            >Day</a
          >
        </div>
      </div>
    </div>
  </div>
  <div>
    <table class="calendar-table" *ngIf="calendar">
      <thead>
        <tr>
          <th>Monday</th>
          <th>Tuesday</th>
          <th>Wednesday</th>
          <th>Thursday</th>
          <th>Friday</th>
          <th>Saturday</th>
          <th>Sunday</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of calendar | week: 7; let i = index">
          <td
            class="calendar-day"
            [ngClass]="{
              'past-date': c.isPastDate,
              today: c.isToday,
              next: c.date.getMonth() !== month
            }"
            *ngFor="let c of row; let j = index"
            (click)="onEvent(c.date)"
          >
            <div
              class="calendar-day-header"
              [ngClass]="{
                'blue-date': c.isToday,
                next: c.date.getMonth() !== month
              }"
            >
              <h6 style="margin-top: 10px">{{ c.date.getDate() }}</h6>
              <ng-container
                *ngIf="
                  calendarEvents[c.date | date: 'DD-MM-YYYY'] &&
                  calendarEvents[c.date | date: 'DD-MM-YYYY'].length > 0
                "
              >
                <div
                  *ngFor="
                    let event of calendarEvents[
                      c.date | date: 'DD-MM-YYYY'
                    ].slice(0, 2);
                    let j = index
                  "
                >
                  <p
                    class="event-day"
                    (click)="onEdit(event); $event.stopPropagation()"
                  >
                    <b> {{ event.eventname }} at {{ event.fromTime }} </b>
                  </p>
                </div>
              </ng-container>
              <div
                *ngIf="
                  calendarEvents[c.date | date: 'DD-MM-YYYY'] &&
                  calendarEvents[c.date | date: 'DD-MM-YYYY'].length > 2
                "
                (click)="setSelectedDate(c.date); $event.stopPropagation()"
              >
                More events
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <app-event-create *ngIf="clicked"></app-event-create>

  <app-events-view
    *ngIf="selectedDate"
    [eventDetails]="calendarEvents[selectedDate]"
    (handleFullDetailsModel)="handleFullDetailsModel(true)"
  ></app-events-view>

  <app-preview *ngIf="preview" [eventDetails]="eventDetails"></app-preview>

  <notifier-container></notifier-container>
  <div
    *ngIf="isDropdown"
    class="
      mt-2
      w-56
      rounded-md
      shadow-lg
      bg-white
      ring-1 ring-black ring-opacity-5
      focus:outline-none
    "
    role="menu"
    aria-orientation="vertical"
    aria-labelledby="options-menu"
    style="
      z-index: 999999999999;
      cursor: pointer;
      position: absolute;
      top: 2.4rem;
      left: 17rem;
    "
  >
    <div class="py-1" role="none">
      <div
        class="
          block
          px-4
          py-2
          text-sm text-gray-700
          hover:bg-gray-100
          hover:text-gray-900
        "
        (click)="setDropDownMonth(0)"
      >
        January
      </div>
      <div
        class="
          block
          px-4
          py-2
          text-sm text-gray-700
          hover:bg-gray-100
          hover:text-gray-900
        "
        (click)="setDropDownMonth(1)"
      >
        February
      </div>
      <div
        class="
          block
          px-4
          py-2
          text-sm text-gray-700
          hover:bg-gray-100
          hover:text-gray-900
        "
        (click)="setDropDownMonth(2)"
      >
        March
      </div>
      <div
        class="
          block
          px-4
          py-2
          text-sm text-gray-700
          hover:bg-gray-100
          hover:text-gray-900
        "
        (click)="setDropDownMonth(3)"
      >
        April
      </div>
      <div
        class="
          block
          px-4
          py-2
          text-sm text-gray-700
          hover:bg-gray-100
          hover:text-gray-900
        "
        (click)="setDropDownMonth(4)"
      >
        May
      </div>
      <div
        class="
          block
          px-4
          py-2
          text-sm text-gray-700
          hover:bg-gray-100
          hover:text-gray-900
        "
        (click)="setDropDownMonth(5)"
      >
        June
      </div>
      <div
        class="
          block
          px-4
          py-2
          text-sm text-gray-700
          hover:bg-gray-100
          hover:text-gray-900
        "
        (click)="setDropDownMonth(6)"
      >
        July
      </div>
      <div
        class="
          block
          px-4
          py-2
          text-sm text-gray-700
          hover:bg-gray-100
          hover:text-gray-900
        "
        (click)="setDropDownMonth(7)"
      >
        August
      </div>
      <div
        class="
          block
          px-4
          py-2
          text-sm text-gray-700
          hover:bg-gray-100
          hover:text-gray-900
        "
        (click)="setDropDownMonth(8)"
      >
        September
      </div>
      <div
        class="
          block
          px-4
          py-2
          text-sm text-gray-700
          hover:bg-gray-100
          hover:text-gray-900
        "
        (click)="setDropDownMonth(9)"
      >
        October
      </div>
      <div
        class="
          block
          px-4
          py-2
          text-sm text-gray-700
          hover:bg-gray-100
          hover:text-gray-900
        "
        (click)="setDropDownMonth(10)"
      >
        November
      </div>
      <div
        class="
          block
          px-4
          py-2
          text-sm text-gray-700
          hover:bg-gray-100
          hover:text-gray-900
        "
        (click)="setDropDownMonth(11)"
      >
        December
      </div>
      <form method="POST" action="#" role="none">
        <button
          type="submit"
          class="
            block
            w-full
            text-left
            px-4
            py-2
            text-sm text-gray-700
            hover:bg-gray-100
            hover:text-gray-900
          "
          role="menuitem"
        ></button>
      </form>
    </div>
  </div>
</div>
